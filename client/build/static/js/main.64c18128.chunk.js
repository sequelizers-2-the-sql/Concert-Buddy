(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t,a){e.exports=a(560)},220:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},335:function(e,t){},337:function(e,t){},372:function(e,t){},373:function(e,t){},466:function(e,t){},560:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(82),l=a.n(s),c=(a(220),a(10)),o=a(11),i=a(13),u=a(12),m=a(16),h=a(14),d=a(25),p=a.n(d),g=a(563),v=a(562),f=a(36),b={concertArtist:function(e){return p.a.get("https://api.songkick.com/api/3.0/search/artists.json?apikey=5lteuiQE9y5NzSiJ&query="+e).then(function(e){var t=+e.data.resultsPage.results.artist[0].id;return console.log(t),p.a.get("https://api.songkick.com/api/3.0/artists/".concat(t,"/calendar.json?apikey=5lteuiQE9y5NzSiJ"))})},concertZip:function(e){return p.a.get("https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key=AIzaSyAZuF8mTrMiYKcZ7z_Z8HnPrG201L2kpqY").then(function(e){var t=+e.data.results[0].geometry.location.lat,a=+e.data.results[0].geometry.location.lng;return p.a.get("https://api.songkick.com/api/3.0/search/locations.json?location=geo:".concat(t,",").concat(a,"&apikey=5lteuiQE9y5NzSiJ"))}).then(function(e){var t=+e.data.resultsPage.results.location[0].metroArea.id;return p.a.get("https://api.songkick.com/api/3.0/metro_areas/".concat(t,"/calendar.json?apikey=5lteuiQE9y5NzSiJ"))})}},E={attendConcert:function(e){return p.a.post("/api/concerts",e)},getConcert:function(e){return p.a.get("/api/concerts/"+e)},getMyEvents:function(e){return p.a.get("/api/users/"+e)}};function y(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control"},e)))}function j(e){return r.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:1},className:"btn btn-secondary"}),e.children)}a(239);function k(e){return r.a.createElement("hgroup",{className:"mb20"},r.a.createElement("h1",null,"Concerts Below"),r.a.createElement("h2",{className:"lead"},r.a.createElement("strong",{className:"text-danger"},e.number)," results were found for the search for ",r.a.createElement("strong",{className:"text-danger"},e.input)))}function N(e){return r.a.createElement("div",null,r.a.createElement("section",{className:"listItem col-xs-12 col-sm-6 col-md-12"},r.a.createElement("article",{className:"search-result row"},r.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-7 excerpet"},r.a.createElement("h3",{className:"result-title",onClick:function(){e.clickHandler(e.event)}},e.event.displayName),r.a.createElement("p",null,e.event.displayName)),r.a.createElement("span",{className:"clearfix borda"}))),r.a.createElement("hr",null))}var O=function(e){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:"Zip",checked:e.zip,onChange:e.change}),"Zip")),r.a.createElement("li",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:"Artist",checked:e.artist,onChange:e.change}),"Artist")))};function S(e){e.props;var t=e.children;return r.a.createElement("div",{className:"container"},t)}function C(e){var t=e.children;return r.a.createElement("div",{className:"row"},t)}function w(e){var t=e.size,a=e.children;return r.a.createElement("div",{className:t.split(" ").map(function(e){return"col-"+e}).join(" ")},a)}var I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={events:[],search:"",selector:"",input:"",searched:!1},a.handleFormSubmit=function(e){e.preventDefault(),a.state.search&&a.state.selector&&("Zip"===a.state.selector?b.concertZip(a.state.search).then(function(e){console.log(e);var t=e.data.resultsPage.results.event;t.length>20&&(t.length=20),a.setState({events:t,searched:!0})}).catch(function(e){return console.log(e)}):"Artist"===a.state.selector&&b.concertArtist(a.state.search).then(function(e){console.log(e);var t=e.data.resultsPage.results.event;t.length>20&&(t.length=20),a.setState({events:t})}))},a.attendEvent=function(e){var t=a.props.userId;E.attendConcert({userId:t,concertId:e.id,artist:e.performance[0].artist.displayName,venue:e.venue.displayName,date:e.start.date,time:e.start.time,city:e.venue.metroArea.displayName,latitude:e.venue.lat,longitude:e.venue.lng}).then(function(e){return window.location.href="/concerts/"+e.data._id}).catch(function(e){return console.log(e)})},a.handleRadioChange=function(e){a.setState({selector:e.target.value})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.events.length>0?r.a.createElement(k,{number:this.state.events.length,input:this.state.search}):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null,r.a.createElement(C,null,r.a.createElement(w,{size:"md-12"},r.a.createElement("form",null,r.a.createElement(y,{value:this.state.search,onChange:this.handleInputChange,name:"search",placeholder:"Search"}),r.a.createElement(O,{zip:"Zip"===this.state.selector,artist:"Artist"===this.state.selector,change:this.handleRadioChange}),r.a.createElement(j,{disabled:!this.state.search,onClick:this.handleFormSubmit},"Search")),t,this.state.events?this.state.events.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{event:t,clickHandler:e.attendEvent,key:a}))}):!this.state.searched(r.a.createElement("h3",null,"No Results to Display"))))))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},concerts:[]},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.getMyEvents(this.props.match.params.id).then(function(t){e.setState({user:t.data,concerts:t.data.concerts}),console.log(e.state.user),console.log(e.state.concerts)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null,this.state.concerts?this.state.concerts.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{event:t.artist,clickHandler:e.attendEvent,key:a}))}):r.a.createElement("h3",null,"No Results to Display"),r.a.createElement(C,null,r.a.createElement(w,{size:"md-12"}))))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={event:{}},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.getConcert(this.props.match.params.id).then(function(t){e.setState({event:t.data}),console.log(e.state.event.artist)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null,r.a.createElement(C,null,r.a.createElement(w,{size:"md-12"},r.a.createElement("h1",null,this.state.event.artist),r.a.createElement("h2",null,"Playing at ",this.state.event.venue," at ",this.state.event.time)))))}}]),t}(n.Component),U=(a(240),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",password:"",confirmPassword:""},e.handleSubmit=e.handleSubmit.bind(Object(m.a)(e)),e.handleChange=e.handleChange.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){console.log("sign-up handleSubmit, username: "),console.log(this.state.username),e.preventDefault(),p.a.post("/api/users/signup  ",{username:this.state.username,password:this.state.password}).then(function(e){console.log(e),e.data.error?console.log("username already taken"):(console.log("successful signup"),window.location.href="/login")}).catch(function(e){console.log("signup error: "),console.log(e)})}},{key:"render",value:function(){return r.a.createElement(S,null,r.a.createElement(C,null,r.a.createElement("div",{className:"SignupForm"},r.a.createElement("h4",null,"Sign up"),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-4 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),r.a.createElement("div",{className:"col-4 col-mr-auto"},r.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group "},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmit,type:"submit"},"Sign up"))))))}}]),t}(n.Component)),M=a(564),z=(a(241),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",password:"",redirectTo:null},e.handleSubmit=e.handleSubmit.bind(Object(m.a)(e)),e.handleChange=e.handleChange.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log("handleSubmit"),p.a.post("api/users/login",{username:this.state.username,password:this.state.password}).then(function(e){console.log("login response: "),console.log(e),200===e.status&&(t.props.updateUser({loggedIn:!0,username:e.data.username}),window.location.href="/home")}).catch(function(e){console.log("login error: "),console.log(e)})}},{key:"render",value:function(){return this.state.redirectTo?r.a.createElement(M.a,{to:{pathname:this.state.redirectTo}}):r.a.createElement(S,null,r.a.createElement(C,null,r.a.createElement("div",{className:"loginForm"},r.a.createElement("h4",null,"Login"),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group "},r.a.createElement("div",{className:"col-7"}),r.a.createElement("button",{className:"btn btn-primary col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Login"))))))}}]),t}(n.Component));a(245);function D(e){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"ConcertBuddy"),r.a.createElement("ul",{class:"nav nav-pills"},r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link logo-nav",href:"/home"},"home")),r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link logo-nav",href:"/myevents/".concat(e.userId)},"my events")),r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link logo-nav",href:"/api/users/logout"},"logout")))))}var F=a(18),P=a(53),T=(a(246),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={events:[],search:"",selector:"",input:""},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(F.Provider,{theme:{fonts:{sans:'"Major Mono Display", Arial, sans-serif'},fontSizes:[12,14,16,20,24,32,48,64,72,96],breakpoints:[32,48,64,80],space:[0,4,8,16,32,64,128]}},r.a.createElement(P.Hero,{color:"white",backgroundImage:"./photos/edwin-pic.jpg",bg:"black",bgOpacity:.2},r.a.createElement(F.Heading,{font:"Major Mono Display",fontSize:72},"ConcertBuddy"),r.a.createElement(F.Subhead,{className:"subhead",font:"Arial",fontSize:24},"don't ride solo to the show!"),r.a.createElement(P.Flex,{mt:3},r.a.createElement(P.CallToAction,{className:"buttons",href:"/signup",font:"Arial",bg:"grey",mr:5,color:"white"},"SIGN UP"),r.a.createElement(P.CallToAction,{className:"buttons",href:"/login",font:"Arial",color:"white"},"LOG IN")),r.a.createElement(P.ScrollDownIndicator,null)))}}]),t}(n.Component));a(322);function Z(e){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"ConcertBuddy"),r.a.createElement("ul",{class:"nav nav-pills"},r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link logo-nav",href:"/signup"},"sign up")),r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link logo-nav",href:"/login"},"login")),r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link logo-nav",href:"/about"},"about")))))}a(323);var H=a(211),R=a.n(H),G=a(565),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={nickname:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({nickname:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),new R.a({instanceLocator:"v1:us1:bba82808-7449-4f24-a517-a97ac38da58a",key:"b45deb0b-fb92-473a-86b6-28b3866ae055:BZhEh5QKDNYunYk7GTKn0DZjXaVzTKDuHWXGbmnzTio="}).createUser({id:this.state.nickname,name:this.state.nickname}).then(function(e){console.log("we made this user!!",e.name),localStorage.setItem("nickname",e.name),t.props.history.push("/chatapp")}).catch(function(e){console.log(e.status)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"Let's Chat!"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},r.a.createElement("label",{htmlFor:"nickname"},"What is your nickname?"),r.a.createElement("input",{type:"text",name:"nickname",onChange:this.handleChange,className:"input"}),r.a.createElement("button",{className:"submit"},"Submit")))}}]),t}(n.Component),B=Object(G.a)(L),J=a(213),V=a(120),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={message:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.message),this.setState({message:""})}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"input-field"},r.a.createElement("input",{className:"message-input",type:"text",onChange:this.handleChange,value:this.state.message}),r.a.createElement("input",{className:"message-submit",type:"submit",value:"send"}))}}]),t}(n.Component),Q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"message-list"},this.props.messages.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("h4",{className:"message-sender"},e.senderId),r.a.createElement("p",{className:"message-text"},e.text))}),r.a.createElement("li",null))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:null,currentRoom:{users:[]},messages:[],users:[]},a.addMessage=a.addMessage.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("THIS IS USER IN CHAT APP!!!",localStorage.getItem("nickname")),new V.ChatManager({instanceLocator:"v1:us1:bba82808-7449-4f24-a517-a97ac38da58a",userId:localStorage.getItem("nickname"),tokenProvider:new V.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/bba82808-7449-4f24-a517-a97ac38da58a/token"})}).connect().then(function(t){return console.log("this is the user coming back from chatManager!!!",t),e.setState({currentUser:t}),t.subscribeToRoom({roomId:"19410040",messageLimit:100,hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(J.a)(e.state.messages),[t])})}}})}).then(function(t){console.log("this is the current room",t),e.setState({currentRoom:t,users:t.userIds})}).catch(function(e){return console.log("Error!!!",e)})}},{key:"addMessage",value:function(e){console.log(this.state),this.state.currentUser.sendMessage({text:e,roomId:this.state.currentRoom.id}).catch(function(e){return console.error("error",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{className:"header"},"Hi There, Ask us anything"),r.a.createElement(Q,{messages:this.state.messages}),r.a.createElement(_,{className:"input-field",onSubmit:this.addMessage}))}}]),t}(n.Component),K=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={loggedIn:!1,username:null,userId:null,currentUsername:"",currentId:"",currentView:"signup"},e.getUser=e.getUser.bind(Object(m.a)(e)),e.componentDidMount=e.componentDidMount.bind(Object(m.a)(e)),e.updateUser=e.updateUser.bind(Object(m.a)(e)),e.changeView=e.changeView.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"updateUser",value:function(e){this.setState(e)}},{key:"getUser",value:function(){var e=this;p.a.get("/api/users/").then(function(t){console.log("Get user response: "),console.log(t.data),t.data.user?(console.log("Get User: There is a user saved in the server session: "),e.setState({loggedIn:!0,username:t.data.user.username,userId:t.data.user._id})):(console.log("Get user: no user"),e.setState({loggedIn:!1,username:null,userId:null}))})}},{key:"changeView",value:function(e){this.setState({currentView:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},"/signup"===window.location.pathname||"/login"===window.location.pathname||"/"===window.location.pathname?r.a.createElement(Z,null):r.a.createElement(D,{userId:this.state.userId,updateUser:this.updateUser,loggedIn:this.state.loggedIn}),this.state.loggedIn&&r.a.createElement("p",null,"You are logged in, ",this.state.username,", userId: ",this.state.userId,"!!!!"),r.a.createElement(v.a,{exact:!0,path:"/home",render:function(){return r.a.createElement(I,{userId:e.state.userId})}}),r.a.createElement(v.a,{path:"/login",render:function(){return r.a.createElement(z,{updateUser:e.updateUser})}}),r.a.createElement(v.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(U,null)}}),r.a.createElement(v.a,{exact:!0,path:"/myevents/:id",component:A}),r.a.createElement(v.a,{exact:!0,path:"/concerts/:id",component:x}),r.a.createElement(v.a,{exact:!0,path:"/",component:T}),r.a.createElement(v.a,{exact:!0,path:"/chat",component:B}),r.a.createElement(v.a,{exact:!0,path:"/chatApp",component:Y})))}}]),t}(n.Component);l.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.64c18128.chunk.js.map